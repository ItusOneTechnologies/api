<div class="page-header">
  <h1>
    Users
    <a href="/users/create" class="btn btn-default">
      <span class="glyphicon glyphicon-plus"></span>
      New User
    </a>
    <div class="dropdown" style="display: inline-block">
      <button type="button" class="btn btn-default dropdown-toggle" id="manage-dropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        <span class="glyphicon glyphicon-cog"></span>
        Manage
      </button>
      <ul class="dropdown-menu" role="menu" aria-labelledby="manage-dropdown">
        <li><a class="dropdown-item" href="#">Delete Selected</a></li>
        <li ng-if="!user.jobsiteSuccess"></li>
        <li ng-if="user.jobsiteSuccess">
          <ul class="list-group" ng-repeat="job in user.jobsites">
            <a href="#" ng-click="user.addToJobsite(job._id)">
              <li class="list-group-item">{{ job.name }}</li>
            </a>
          </ul>
        </li>
      </ul>
    </div>
  </h1>
</div>

<!-- LOADING MESSAGE -->
<div class="jumbotron text-center" ng-show="user.processing">
  <span class="glyphicon glyphicon-repeat spinner"></span>
  <p>Loading users...</p>
</div>

<table class="table table-bordered table-striped" ng-show="user.users">
  <thead>
    <tr>
      <th></th>
      <th>_id</th>
      <th>Name</th>
      <th>Username</th>
      <th class="col-sm-2"></th>
    </tr>
  </thead>
  <tbody>
    <!-- Loop over the users -->
    <tr ng-repeat="person in user.users">
      <td><input type="checkbox" ng-model="user.selected[person._id]"></td>
      <td>{{ person._id }}</td>
      <td>{{ person.name }}</td>
      <td>{{ person.username }}</td>
      <td class="col-sm-2">
        <a ng-href="/users/{{ person._id }}" class="btn btn-primary col-sm-6">Edit</a>
        <a href="#" ng-click="user.deleteUser(person._id)" class="btn btn-danger col-sm-6">Delete</a>
      </td>
    </tr>
  </tbody>
</table>
